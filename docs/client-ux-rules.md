# 🎮 客户端 UI/UX 交互规范

## 1. 玩家状态指示

### 1.1 当前行动玩家 (Active Player)
- **视觉高亮**：当前轮到行动的玩家头像/座位框需有明显的视觉强调。
  - **样式**：边框发光 (Glow effect)、颜色变化 (绿色/黄色)。
  - **动画**：使用温和的脉冲动画 (Pulse) 提示紧迫感。
- **文字提示**：
  - 自己回合：显示 "🎯 轮到你行动"。
  - 他人回合：显示 "行动中" 或 "Waiting..."。

### 1.2 倒计时 (Timeout)
- 必须显示倒计时进度条或数字，颜色随时间减少而变红。
- 超时后需平滑过渡到自动操作（Check/Fold），UI 不应卡顿。

---

## 2. 操作按钮 (Action Buttons)

### 2.1 显示规则
- **仅在我的回合显示**：非当前行动玩家不得显示操作面板。
- **动态可用性**：按钮需根据当前游戏状态（筹码、下注额）启用/禁用。

### 2.2 按钮逻辑
| 按钮 | 显示条件 | 禁用条件 | 备注 |
|------|----------|----------|------|
| **FOLD** (弃牌) | 始终显示（轮到我时） | 无 | |
| **CHECK** (过牌) | `需跟注金额 == 0` | `需跟注金额 > 0` | 只有无人加注时可用 |
| **CALL** (跟注) | `需跟注金额 > 0` | `筹码 < 需跟注金额` | 显示具体跟注金额 |
| **RAISE** (加注) | `筹码 > 需跟注金额` | `筹码 < 最小加注额` | 需提供滑块/输入框 |
| **ALL-IN** (全押) | `筹码 > 0` | 无 | 最后的手段 |

### 2.3 交互反馈
- 点击后按钮应立即禁用或显示 Loading 状态，防止重复提交。
- 操作成功后面板自动隐藏。

---

## 3. 面板与动画
- **公共牌**：发牌时应有翻牌动画。
- **底池**：底池金额变化时应有数字滚动或高亮效果。
- **筹码**：下注时筹码应从玩家位置“飞”入底池（可选，MVP 阶段只需数字变更）。

## 4. 异常处理
- **网络波动**：WebSocket 断开时，显示遮罩层或明显的“重连中”提示。
- **非法操作**：如客户端发出非法 Action，服务端返回 Error，前端需 Toast 提示并刷新状态，不应白屏。

---

## 5. 倒计时 (Timeout) 详细规范

### 5.1 数据来源
- 超时时间戳由服务端 `PLAYER_TURN` 事件携带
- 客户端基于 `Date.now()` 计算剩余秒数

### 5.2 视觉表现
| 剩余时间 | 进度条颜色 | 动画效果 |
|----------|------------|----------|
| > 5 秒 | 绿色渐变 | 无 |
| ≤ 5 秒 | 红色渐变 | 脉冲闪烁 |

### 5.3 超时行为
- 超时后服务端自动执行 CHECK（无需跟注）或 FOLD（需跟注）
- 客户端倒计时归零后等待服务端状态同步

---

## 6. Showdown 展示规范

### 6.1 触发时机
- 河牌圈结束后多人未弃牌
- 或所有人 All-in 后公共牌发完

### 6.2 展示内容
1. **赢家区域**：金色卡片，显示昵称、牌型、筹码
2. **亮牌区域**：所有未弃牌玩家底牌
3. **过渡提示**："下一局即将开始..."

### 6.3 边缘情况
- **单人获胜**：仅显示赢家，不亮牌
- **平局**：多个赢家卡片，各自显示分得筹码
- **多边池**：每个边池独立显示赢家

### 6.4 动画设计
- 弹窗 `slideUp` 0.3s
- 赢家卡片 `winnerPop` 0.5s
- 3 秒后自动消失进入新局
